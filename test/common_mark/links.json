[
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-481",
    "markdown": "[link](/uri \"title\")\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 20,
          "offset": 20
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 20,
              "offset": 20
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "text": "title"
              },
              {
                "start": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "end": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/uri",
              "title": "title"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-482",
    "markdown": "[link](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 12,
          "offset": 12
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-483",
    "markdown": "[](./target.md)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 3,
                  "offset": 3
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 3,
                  "offset": 3
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "./target.md"
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": ")"
              }
            ],
            "attributes": {
              "destination": "./target.md"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-484",
    "markdown": "[link]()\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 8,
          "offset": 8
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 8,
              "offset": 8
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": ""
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-485",
    "markdown": "[link](<>)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 10,
          "offset": 10
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": "<"
              },
              {
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "text": ">"
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": ""
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-486",
    "markdown": "[]()\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 4,
          "offset": 4
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 4,
              "offset": 4
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 3,
                  "offset": 3
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 3,
                  "offset": 3
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "text": ")"
              }
            ],
            "attributes": {
              "destination": ""
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-487",
    "markdown": "[link](/my uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "text": "[link](/my uri)",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-488",
    "markdown": "[link](</my uri>)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 17,
          "offset": 17
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 17,
              "offset": 17
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": "<"
              },
              {
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "/my uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": ">"
              },
              {
                "start": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "end": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/my%20uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-489",
    "markdown": "[link](foo\nbar)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 1,
          "column": 4,
          "offset": 15
        },
        "children": [
          {
            "text": "[link](foo\nbar)",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 1,
              "column": 4,
              "offset": 15
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-490",
    "markdown": "[link](<foo\nbar>)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 1,
          "column": 5,
          "offset": 17
        },
        "children": [
          {
            "text": "[link](",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 7,
              "offset": 7
            }
          },
          {
            "type": "rawHtml",
            "start": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "end": {
              "line": 1,
              "column": 4,
              "offset": 16
            },
            "children": [
              {
                "text": "<foo\nbar>",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 1,
                  "column": 4,
                  "offset": 16
                }
              }
            ]
          },
          {
            "text": ")",
            "start": {
              "line": 1,
              "column": 4,
              "offset": 16
            },
            "end": {
              "line": 1,
              "column": 5,
              "offset": 17
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-491",
    "markdown": "[a](<b)c>)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 10,
          "offset": 10
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 3,
                  "offset": 3
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 3,
                  "offset": 3
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "<"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": "b)c"
              },
              {
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "text": ">"
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "a",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                }
              }
            ],
            "attributes": {
              "destination": "b)c"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-492",
    "markdown": "[link](<foo\\>)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 14,
          "offset": 14
        },
        "markers": [
          {
            "start": {
              "line": 0,
              "column": 11,
              "offset": 11
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "text": "\\"
          }
        ],
        "children": [
          {
            "text": "[link](<foo",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 11,
              "offset": 11
            }
          },
          {
            "text": ">",
            "start": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "end": {
              "line": 0,
              "column": 13,
              "offset": 13
            }
          },
          {
            "text": ")",
            "start": {
              "line": 0,
              "column": 13,
              "offset": 13
            },
            "end": {
              "line": 0,
              "column": 14,
              "offset": 14
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-493",
    "markdown": "[a](<b)c\n[a](<b)c>\n[a](<b>c)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 2,
          "column": 9,
          "offset": 28
        },
        "children": [
          {
            "text": "[a](<b)c\n[a](<b)c>\n[a](",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 23
            }
          },
          {
            "type": "rawHtml",
            "start": {
              "line": 2,
              "column": 4,
              "offset": 23
            },
            "end": {
              "line": 2,
              "column": 7,
              "offset": 26
            },
            "children": [
              {
                "text": "<b>",
                "start": {
                  "line": 2,
                  "column": 4,
                  "offset": 23
                },
                "end": {
                  "line": 2,
                  "column": 7,
                  "offset": 26
                }
              }
            ]
          },
          {
            "text": "c)",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 9,
              "offset": 28
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-494",
    "markdown": "[link](\\(foo\\))\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "\\(foo\\)"
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "(foo)"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-495",
    "markdown": "[link](foo(and(bar)))\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 21,
          "offset": 21
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 21,
              "offset": 21
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": "foo(and(bar))"
              },
              {
                "start": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "end": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "foo(and(bar))"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-496",
    "markdown": "[link](foo(and(bar))\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 20,
          "offset": 20
        },
        "children": [
          {
            "text": "[link](foo(and(bar))",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 20,
              "offset": 20
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-497",
    "markdown": "[link](foo\\(and\\(bar\\))\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 23,
          "offset": 23
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 23,
              "offset": 23
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "text": "foo\\(and\\(bar\\)"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "end": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "foo(and(bar)"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-498",
    "markdown": "[link](<foo(and(bar)>)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 22,
          "offset": 22
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 22,
              "offset": 22
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": "<"
              },
              {
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": "foo(and(bar)"
              },
              {
                "start": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "end": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "text": ">"
              },
              {
                "start": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "end": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "foo(and(bar)"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-499",
    "markdown": "[link](foo\\)\\:)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "foo\\)\\:"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "foo):"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-500",
    "markdown": "[link](#fragment)\n\n[link](http://example.com#fragment)\n\n[link](http://example.com?foo=3#frag)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 17,
          "offset": 17
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 17,
              "offset": 17
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": "#fragment"
              },
              {
                "start": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "end": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "#fragment"
            }
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 19
        },
        "end": {
          "line": 2,
          "column": 35,
          "offset": 54
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 35,
              "offset": 54
            },
            "markers": [
              {
                "start": {
                  "line": 2,
                  "column": 0,
                  "offset": 19
                },
                "end": {
                  "line": 2,
                  "column": 1,
                  "offset": 20
                },
                "text": "["
              },
              {
                "start": {
                  "line": 2,
                  "column": 5,
                  "offset": 24
                },
                "end": {
                  "line": 2,
                  "column": 6,
                  "offset": 25
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 2,
                  "column": 6,
                  "offset": 25
                },
                "end": {
                  "line": 2,
                  "column": 7,
                  "offset": 26
                },
                "text": "("
              },
              {
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 26
                },
                "end": {
                  "line": 2,
                  "column": 34,
                  "offset": 53
                },
                "text": "http://example.com#fragment"
              },
              {
                "start": {
                  "line": 2,
                  "column": 34,
                  "offset": 53
                },
                "end": {
                  "line": 2,
                  "column": 35,
                  "offset": 54
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 5,
                  "offset": 24
                }
              }
            ],
            "attributes": {
              "destination": "http://example.com#fragment"
            }
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 4,
          "column": 0,
          "offset": 56
        },
        "end": {
          "line": 4,
          "column": 37,
          "offset": 93
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 4,
              "column": 0,
              "offset": 56
            },
            "end": {
              "line": 4,
              "column": 37,
              "offset": 93
            },
            "markers": [
              {
                "start": {
                  "line": 4,
                  "column": 0,
                  "offset": 56
                },
                "end": {
                  "line": 4,
                  "column": 1,
                  "offset": 57
                },
                "text": "["
              },
              {
                "start": {
                  "line": 4,
                  "column": 5,
                  "offset": 61
                },
                "end": {
                  "line": 4,
                  "column": 6,
                  "offset": 62
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 4,
                  "column": 6,
                  "offset": 62
                },
                "end": {
                  "line": 4,
                  "column": 7,
                  "offset": 63
                },
                "text": "("
              },
              {
                "start": {
                  "line": 4,
                  "column": 7,
                  "offset": 63
                },
                "end": {
                  "line": 4,
                  "column": 36,
                  "offset": 92
                },
                "text": "http://example.com?foo=3#frag"
              },
              {
                "start": {
                  "line": 4,
                  "column": 36,
                  "offset": 92
                },
                "end": {
                  "line": 4,
                  "column": 37,
                  "offset": 93
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 4,
                  "column": 1,
                  "offset": 57
                },
                "end": {
                  "line": 4,
                  "column": 5,
                  "offset": 61
                }
              }
            ],
            "attributes": {
              "destination": "http://example.com?foo=3#frag"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-501",
    "markdown": "[link](foo\\bar)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "foo\\bar"
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "foo%5Cbar"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-502",
    "markdown": "[link](foo%20b&auml;)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 21,
          "offset": 21
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 21,
              "offset": 21
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": "foo%20b&auml;"
              },
              {
                "start": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "end": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "foo%20b%C3%A4"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-503",
    "markdown": "[link](\"title\")\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "\"title\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "%22title%22"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-504",
    "markdown": "[link](/url \"title\")\n[link](/url 'title')\n[link](/url (title))\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 2,
          "column": 20,
          "offset": 62
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 20,
              "offset": 20
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "/url"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "text": "title"
              },
              {
                "start": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "end": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          },
          {
            "text": "\n",
            "start": {
              "line": 0,
              "column": 20,
              "offset": 20
            },
            "end": {
              "line": 1,
              "column": 0,
              "offset": 21
            }
          },
          {
            "type": "link",
            "start": {
              "line": 1,
              "column": 0,
              "offset": 21
            },
            "end": {
              "line": 1,
              "column": 20,
              "offset": 41
            },
            "markers": [
              {
                "start": {
                  "line": 1,
                  "column": 0,
                  "offset": 21
                },
                "end": {
                  "line": 1,
                  "column": 1,
                  "offset": 22
                },
                "text": "["
              },
              {
                "start": {
                  "line": 1,
                  "column": 5,
                  "offset": 26
                },
                "end": {
                  "line": 1,
                  "column": 6,
                  "offset": 27
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 1,
                  "column": 6,
                  "offset": 27
                },
                "end": {
                  "line": 1,
                  "column": 7,
                  "offset": 28
                },
                "text": "("
              },
              {
                "start": {
                  "line": 1,
                  "column": 7,
                  "offset": 28
                },
                "end": {
                  "line": 1,
                  "column": 11,
                  "offset": 32
                },
                "text": "/url"
              },
              {
                "start": {
                  "line": 1,
                  "column": 12,
                  "offset": 33
                },
                "end": {
                  "line": 1,
                  "column": 13,
                  "offset": 34
                },
                "text": "'"
              },
              {
                "start": {
                  "line": 1,
                  "column": 13,
                  "offset": 34
                },
                "end": {
                  "line": 1,
                  "column": 18,
                  "offset": 39
                },
                "text": "title"
              },
              {
                "start": {
                  "line": 1,
                  "column": 18,
                  "offset": 39
                },
                "end": {
                  "line": 1,
                  "column": 19,
                  "offset": 40
                },
                "text": "'"
              },
              {
                "start": {
                  "line": 1,
                  "column": 19,
                  "offset": 40
                },
                "end": {
                  "line": 1,
                  "column": 20,
                  "offset": 41
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 1,
                  "column": 1,
                  "offset": 22
                },
                "end": {
                  "line": 1,
                  "column": 5,
                  "offset": 26
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          },
          {
            "text": "\n",
            "start": {
              "line": 1,
              "column": 20,
              "offset": 41
            },
            "end": {
              "line": 2,
              "column": 0,
              "offset": 42
            }
          },
          {
            "type": "link",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 42
            },
            "end": {
              "line": 2,
              "column": 20,
              "offset": 62
            },
            "markers": [
              {
                "start": {
                  "line": 2,
                  "column": 0,
                  "offset": 42
                },
                "end": {
                  "line": 2,
                  "column": 1,
                  "offset": 43
                },
                "text": "["
              },
              {
                "start": {
                  "line": 2,
                  "column": 5,
                  "offset": 47
                },
                "end": {
                  "line": 2,
                  "column": 6,
                  "offset": 48
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 2,
                  "column": 6,
                  "offset": 48
                },
                "end": {
                  "line": 2,
                  "column": 7,
                  "offset": 49
                },
                "text": "("
              },
              {
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 49
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 53
                },
                "text": "/url"
              },
              {
                "start": {
                  "line": 2,
                  "column": 12,
                  "offset": 54
                },
                "end": {
                  "line": 2,
                  "column": 13,
                  "offset": 55
                },
                "text": "("
              },
              {
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 55
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 60
                },
                "text": "title"
              },
              {
                "start": {
                  "line": 2,
                  "column": 18,
                  "offset": 60
                },
                "end": {
                  "line": 2,
                  "column": 19,
                  "offset": 61
                },
                "text": ")"
              },
              {
                "start": {
                  "line": 2,
                  "column": 19,
                  "offset": 61
                },
                "end": {
                  "line": 2,
                  "column": 20,
                  "offset": 62
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 43
                },
                "end": {
                  "line": 2,
                  "column": 5,
                  "offset": 47
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-505",
    "markdown": "[link](/url \"title \\\"&quot;\")\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 29,
          "offset": 29
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 29,
              "offset": 29
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "/url"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "end": {
                  "line": 0,
                  "column": 27,
                  "offset": 27
                },
                "text": "title \\\"&quot;"
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 27,
                  "offset": 27
                },
                "end": {
                  "line": 0,
                  "column": 28,
                  "offset": 28
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 28,
                  "offset": 28
                },
                "end": {
                  "line": 0,
                  "column": 29,
                  "offset": 29
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title &quot;&quot;"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-506",
    "markdown": "[link](/url \"title\")\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 20,
          "offset": 20
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 20,
              "offset": 20
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "text": "/url \"title\""
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/url%C2%A0%22title%22"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-507",
    "markdown": "[link](/url \"title \"and\" title\")\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 32,
          "offset": 32
        },
        "children": [
          {
            "text": "[link](/url \"title \"and\" title\")",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 32,
              "offset": 32
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-508",
    "markdown": "[link](/url 'title \"and\" title')\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 32,
          "offset": 32
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 32,
              "offset": 32
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "/url"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "'"
              },
              {
                "start": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "end": {
                  "line": 0,
                  "column": 30,
                  "offset": 30
                },
                "text": "title \"and\" title"
              },
              {
                "start": {
                  "line": 0,
                  "column": 30,
                  "offset": 30
                },
                "end": {
                  "line": 0,
                  "column": 31,
                  "offset": 31
                },
                "text": "'"
              },
              {
                "start": {
                  "line": 0,
                  "column": 31,
                  "offset": 31
                },
                "end": {
                  "line": 0,
                  "column": 32,
                  "offset": 32
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title &quot;and&quot; title"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-509",
    "markdown": "[link](   /uri\n  \"title\"  )\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 1,
          "column": 12,
          "offset": 27
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 1,
              "column": 12,
              "offset": 27
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 1,
                  "column": 2,
                  "offset": 17
                },
                "end": {
                  "line": 1,
                  "column": 3,
                  "offset": 18
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 1,
                  "column": 3,
                  "offset": 18
                },
                "end": {
                  "line": 1,
                  "column": 8,
                  "offset": 23
                },
                "text": "title"
              },
              {
                "start": {
                  "line": 1,
                  "column": 8,
                  "offset": 23
                },
                "end": {
                  "line": 1,
                  "column": 9,
                  "offset": 24
                },
                "text": "\""
              },
              {
                "start": {
                  "line": 1,
                  "column": 11,
                  "offset": 26
                },
                "end": {
                  "line": 1,
                  "column": 12,
                  "offset": 27
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ],
            "attributes": {
              "destination": "/uri",
              "title": "title"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-510",
    "markdown": "[link] (/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 13,
          "offset": 13
        },
        "children": [
          {
            "text": "[link] (/uri)",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 13,
              "offset": 13
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-511",
    "markdown": "[link [foo [bar]]](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 24,
          "offset": 24
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 24,
              "offset": 24
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "end": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "end": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                }
              },
              {
                "text": "foo ",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                }
              },
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                }
              },
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                }
              },
              {
                "text": "]",
                "start": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                }
              },
              {
                "text": "]",
                "start": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "end": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-512",
    "markdown": "[link] bar](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 17,
          "offset": 17
        },
        "children": [
          {
            "text": "[link] bar](/uri)",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 17,
              "offset": 17
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-513",
    "markdown": "[link [bar](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 17,
          "offset": 17
        },
        "children": [
          {
            "text": "[link ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 6,
              "offset": 6
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "end": {
              "line": 0,
              "column": 17,
              "offset": 17
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "end": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-514",
    "markdown": "[link \\[bar](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 18,
          "offset": 18
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 18,
              "offset": 18
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "end": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                }
              },
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-515",
    "markdown": "[link *foo **bar** `#`*](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 30,
          "offset": 30
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 30,
              "offset": 30
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "end": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "end": {
                  "line": 0,
                  "column": 25,
                  "offset": 25
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 25,
                  "offset": 25
                },
                "end": {
                  "line": 0,
                  "column": 29,
                  "offset": 29
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 29,
                  "offset": 29
                },
                "end": {
                  "line": 0,
                  "column": 30,
                  "offset": 30
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "link ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "type": "emphasis",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 6,
                      "offset": 6
                    },
                    "end": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "text": "*"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 22,
                      "offset": 22
                    },
                    "end": {
                      "line": 0,
                      "column": 23,
                      "offset": 23
                    },
                    "text": "*"
                  }
                ],
                "children": [
                  {
                    "text": "foo ",
                    "start": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "end": {
                      "line": 0,
                      "column": 11,
                      "offset": 11
                    }
                  },
                  {
                    "type": "strongEmphasis",
                    "start": {
                      "line": 0,
                      "column": 11,
                      "offset": 11
                    },
                    "end": {
                      "line": 0,
                      "column": 18,
                      "offset": 18
                    },
                    "markers": [
                      {
                        "start": {
                          "line": 0,
                          "column": 11,
                          "offset": 11
                        },
                        "end": {
                          "line": 0,
                          "column": 13,
                          "offset": 13
                        },
                        "text": "**"
                      },
                      {
                        "start": {
                          "line": 0,
                          "column": 16,
                          "offset": 16
                        },
                        "end": {
                          "line": 0,
                          "column": 18,
                          "offset": 18
                        },
                        "text": "**"
                      }
                    ],
                    "children": [
                      {
                        "text": "bar",
                        "start": {
                          "line": 0,
                          "column": 13,
                          "offset": 13
                        },
                        "end": {
                          "line": 0,
                          "column": 16,
                          "offset": 16
                        }
                      }
                    ]
                  },
                  {
                    "text": " ",
                    "start": {
                      "line": 0,
                      "column": 18,
                      "offset": 18
                    },
                    "end": {
                      "line": 0,
                      "column": 19,
                      "offset": 19
                    }
                  },
                  {
                    "type": "codeSpan",
                    "start": {
                      "line": 0,
                      "column": 19,
                      "offset": 19
                    },
                    "end": {
                      "line": 0,
                      "column": 22,
                      "offset": 22
                    },
                    "markers": [
                      {
                        "start": {
                          "line": 0,
                          "column": 19,
                          "offset": 19
                        },
                        "end": {
                          "line": 0,
                          "column": 20,
                          "offset": 20
                        },
                        "text": "`"
                      },
                      {
                        "start": {
                          "line": 0,
                          "column": 21,
                          "offset": 21
                        },
                        "end": {
                          "line": 0,
                          "column": 22,
                          "offset": 22
                        },
                        "text": "`"
                      }
                    ],
                    "children": [
                      {
                        "text": "#",
                        "start": {
                          "line": 0,
                          "column": 20,
                          "offset": 20
                        },
                        "end": {
                          "line": 0,
                          "column": 21,
                          "offset": 21
                        }
                      }
                    ]
                  }
                ]
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-516",
    "markdown": "[![moon](moon.jpg)](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 25,
          "offset": 25
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 25,
              "offset": 25
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "end": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "end": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "end": {
                  "line": 0,
                  "column": 25,
                  "offset": 25
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "type": "image",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 1,
                      "offset": 1
                    },
                    "end": {
                      "line": 0,
                      "column": 3,
                      "offset": 3
                    },
                    "text": "!["
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 3,
                      "offset": 3
                    },
                    "end": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "text": "moon"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "end": {
                      "line": 0,
                      "column": 8,
                      "offset": 8
                    },
                    "text": "]"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 8,
                      "offset": 8
                    },
                    "end": {
                      "line": 0,
                      "column": 9,
                      "offset": 9
                    },
                    "text": "("
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 9,
                      "offset": 9
                    },
                    "end": {
                      "line": 0,
                      "column": 17,
                      "offset": 17
                    },
                    "text": "moon.jpg"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 17,
                      "offset": 17
                    },
                    "end": {
                      "line": 0,
                      "column": 18,
                      "offset": 18
                    },
                    "text": ")"
                  }
                ],
                "attributes": {
                  "destination": "moon.jpg",
                  "description": "moon"
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-517",
    "markdown": "[foo [bar](/uri)](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 23,
          "offset": 23
        },
        "children": [
          {
            "text": "[foo ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 16,
              "offset": 16
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          },
          {
            "text": "](/uri)",
            "start": {
              "line": 0,
              "column": 16,
              "offset": 16
            },
            "end": {
              "line": 0,
              "column": 23,
              "offset": 23
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-518",
    "markdown": "[foo *[bar [baz](/uri)](/uri)*](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 37,
          "offset": 37
        },
        "children": [
          {
            "text": "[foo ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "emphasis",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 30,
              "offset": 30
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "*"
              },
              {
                "start": {
                  "line": 0,
                  "column": 29,
                  "offset": 29
                },
                "end": {
                  "line": 0,
                  "column": 30,
                  "offset": 30
                },
                "text": "*"
              }
            ],
            "children": [
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                }
              },
              {
                "text": "bar ",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                }
              },
              {
                "type": "link",
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 11,
                      "offset": 11
                    },
                    "end": {
                      "line": 0,
                      "column": 12,
                      "offset": 12
                    },
                    "text": "["
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 15,
                      "offset": 15
                    },
                    "end": {
                      "line": 0,
                      "column": 16,
                      "offset": 16
                    },
                    "text": "]"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 16,
                      "offset": 16
                    },
                    "end": {
                      "line": 0,
                      "column": 17,
                      "offset": 17
                    },
                    "text": "("
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 17,
                      "offset": 17
                    },
                    "end": {
                      "line": 0,
                      "column": 21,
                      "offset": 21
                    },
                    "text": "/uri"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 21,
                      "offset": 21
                    },
                    "end": {
                      "line": 0,
                      "column": 22,
                      "offset": 22
                    },
                    "text": ")"
                  }
                ],
                "children": [
                  {
                    "text": "baz",
                    "start": {
                      "line": 0,
                      "column": 12,
                      "offset": 12
                    },
                    "end": {
                      "line": 0,
                      "column": 15,
                      "offset": 15
                    }
                  }
                ],
                "attributes": {
                  "destination": "/uri"
                }
              },
              {
                "text": "](/uri)",
                "start": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "end": {
                  "line": 0,
                  "column": 29,
                  "offset": 29
                }
              }
            ]
          },
          {
            "text": "](/uri)",
            "start": {
              "line": 0,
              "column": 30,
              "offset": 30
            },
            "end": {
              "line": 0,
              "column": 37,
              "offset": 37
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-519",
    "markdown": "![[[foo](uri1)](uri2)](uri3)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 28,
          "offset": 28
        },
        "children": [
          {
            "type": "image",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 28,
              "offset": 28
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "text": "!["
              },
              {
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "text": "[[foo](uri1)](uri2)"
              },
              {
                "start": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "end": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "end": {
                  "line": 0,
                  "column": 27,
                  "offset": 27
                },
                "text": "uri3"
              },
              {
                "start": {
                  "line": 0,
                  "column": 27,
                  "offset": 27
                },
                "end": {
                  "line": 0,
                  "column": 28,
                  "offset": 28
                },
                "text": ")"
              }
            ],
            "attributes": {
              "destination": "uri3",
              "description": "[foo](uri2)"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-520",
    "markdown": "*[foo*](/uri)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 13,
          "offset": 13
        },
        "children": [
          {
            "text": "*",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 0,
              "column": 13,
              "offset": 13
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              },
              {
                "text": "*",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-521",
    "markdown": "[foo *bar](baz*)\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 16,
          "offset": 16
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 16,
              "offset": 16
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "baz*"
              },
              {
                "start": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "foo ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              },
              {
                "text": "*",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                }
              }
            ],
            "attributes": {
              "destination": "baz*"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-522",
    "markdown": "*foo [bar* baz]\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "type": "emphasis",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "*"
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "*"
              }
            ],
            "children": [
              {
                "text": "foo ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              },
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                }
              }
            ]
          },
          {
            "text": " baz]",
            "start": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-523",
    "markdown": "[foo <bar attr=\"](baz)\">\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 24,
          "offset": 24
        },
        "children": [
          {
            "text": "[foo ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "rawHtml",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 24,
              "offset": 24
            },
            "children": [
              {
                "text": "<bar attr=\"](baz)\">",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-524",
    "markdown": "[foo`](/uri)`\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 13,
          "offset": 13
        },
        "children": [
          {
            "text": "[foo",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 4,
              "offset": 4
            }
          },
          {
            "type": "codeSpan",
            "start": {
              "line": 0,
              "column": 4,
              "offset": 4
            },
            "end": {
              "line": 0,
              "column": 13,
              "offset": 13
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "`"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "`"
              }
            ],
            "children": [
              {
                "text": "](/uri)",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-525",
    "markdown": "[foo<http://example.com/?search=](uri)>\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 39,
          "offset": 39
        },
        "children": [
          {
            "text": "[foo",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 4,
              "offset": 4
            }
          },
          {
            "type": "autolink",
            "start": {
              "line": 0,
              "column": 4,
              "offset": 4
            },
            "end": {
              "line": 0,
              "column": 39,
              "offset": 39
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "<"
              },
              {
                "start": {
                  "line": 0,
                  "column": 38,
                  "offset": 38
                },
                "end": {
                  "line": 0,
                  "column": 39,
                  "offset": 39
                },
                "text": ">"
              }
            ],
            "children": [
              {
                "text": "http://example.com/?search=](uri)",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 38,
                  "offset": 38
                }
              }
            ],
            "attributes": {
              "destination": "http://example.com/?search=%5D(uri)",
              "text": "http://example.com/?search=](uri)"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-526",
    "markdown": "[foo][bar]\n\n[bar]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 10,
          "offset": 10
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "text": "bar"
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 12
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 31
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 12
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 13
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 17
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 18
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 25
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 30
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 31
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 16
            },
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 13
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 16
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 23
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 19
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 23
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 30
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 25
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 30
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-527",
    "markdown": "[link [foo [bar]]][ref]\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 23,
          "offset": 23
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 23,
              "offset": 23
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "end": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "text": "ref"
              },
              {
                "start": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "link ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                }
              },
              {
                "text": "foo ",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                }
              },
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                }
              },
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                }
              },
              {
                "text": "]",
                "start": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                }
              },
              {
                "text": "]",
                "start": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "end": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 25
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 36
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 26
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 29
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 30
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 30
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 31
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 29
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 26
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 29
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 32
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 36
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 32
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 36
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-528",
    "markdown": "[link \\[bar][ref]\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 17,
          "offset": 17
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 17,
              "offset": 17
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": "ref"
              },
              {
                "start": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "end": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "link ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "text": "[",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                }
              },
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 19
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 30
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 20
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 23
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 24
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 25
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 23
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 23
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 30
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 26
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 30
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-529",
    "markdown": "[link *foo **bar** `#`*][ref]\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 29,
          "offset": 29
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 29,
              "offset": 29
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "end": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "end": {
                  "line": 0,
                  "column": 25,
                  "offset": 25
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 25,
                  "offset": 25
                },
                "end": {
                  "line": 0,
                  "column": 28,
                  "offset": 28
                },
                "text": "ref"
              },
              {
                "start": {
                  "line": 0,
                  "column": 28,
                  "offset": 28
                },
                "end": {
                  "line": 0,
                  "column": 29,
                  "offset": 29
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "link ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "type": "emphasis",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 6,
                      "offset": 6
                    },
                    "end": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "text": "*"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 22,
                      "offset": 22
                    },
                    "end": {
                      "line": 0,
                      "column": 23,
                      "offset": 23
                    },
                    "text": "*"
                  }
                ],
                "children": [
                  {
                    "text": "foo ",
                    "start": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "end": {
                      "line": 0,
                      "column": 11,
                      "offset": 11
                    }
                  },
                  {
                    "type": "strongEmphasis",
                    "start": {
                      "line": 0,
                      "column": 11,
                      "offset": 11
                    },
                    "end": {
                      "line": 0,
                      "column": 18,
                      "offset": 18
                    },
                    "markers": [
                      {
                        "start": {
                          "line": 0,
                          "column": 11,
                          "offset": 11
                        },
                        "end": {
                          "line": 0,
                          "column": 13,
                          "offset": 13
                        },
                        "text": "**"
                      },
                      {
                        "start": {
                          "line": 0,
                          "column": 16,
                          "offset": 16
                        },
                        "end": {
                          "line": 0,
                          "column": 18,
                          "offset": 18
                        },
                        "text": "**"
                      }
                    ],
                    "children": [
                      {
                        "text": "bar",
                        "start": {
                          "line": 0,
                          "column": 13,
                          "offset": 13
                        },
                        "end": {
                          "line": 0,
                          "column": 16,
                          "offset": 16
                        }
                      }
                    ]
                  },
                  {
                    "text": " ",
                    "start": {
                      "line": 0,
                      "column": 18,
                      "offset": 18
                    },
                    "end": {
                      "line": 0,
                      "column": 19,
                      "offset": 19
                    }
                  },
                  {
                    "type": "codeSpan",
                    "start": {
                      "line": 0,
                      "column": 19,
                      "offset": 19
                    },
                    "end": {
                      "line": 0,
                      "column": 22,
                      "offset": 22
                    },
                    "markers": [
                      {
                        "start": {
                          "line": 0,
                          "column": 19,
                          "offset": 19
                        },
                        "end": {
                          "line": 0,
                          "column": 20,
                          "offset": 20
                        },
                        "text": "`"
                      },
                      {
                        "start": {
                          "line": 0,
                          "column": 21,
                          "offset": 21
                        },
                        "end": {
                          "line": 0,
                          "column": 22,
                          "offset": 22
                        },
                        "text": "`"
                      }
                    ],
                    "children": [
                      {
                        "text": "#",
                        "start": {
                          "line": 0,
                          "column": 20,
                          "offset": 20
                        },
                        "end": {
                          "line": 0,
                          "column": 21,
                          "offset": 21
                        }
                      }
                    ]
                  }
                ]
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 31
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 42
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 31
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 32
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 35
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 36
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 36
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 37
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 32
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 35
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 32
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 35
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 38
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 42
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 38
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 42
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-530",
    "markdown": "[![moon](moon.jpg)][ref]\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 24,
          "offset": 24
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 24,
              "offset": 24
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "end": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 19,
                  "offset": 19
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "text": "ref"
              },
              {
                "start": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "end": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "type": "image",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 1,
                      "offset": 1
                    },
                    "end": {
                      "line": 0,
                      "column": 3,
                      "offset": 3
                    },
                    "text": "!["
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 3,
                      "offset": 3
                    },
                    "end": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "text": "moon"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "end": {
                      "line": 0,
                      "column": 8,
                      "offset": 8
                    },
                    "text": "]"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 8,
                      "offset": 8
                    },
                    "end": {
                      "line": 0,
                      "column": 9,
                      "offset": 9
                    },
                    "text": "("
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 9,
                      "offset": 9
                    },
                    "end": {
                      "line": 0,
                      "column": 17,
                      "offset": 17
                    },
                    "text": "moon.jpg"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 17,
                      "offset": 17
                    },
                    "end": {
                      "line": 0,
                      "column": 18,
                      "offset": 18
                    },
                    "text": ")"
                  }
                ],
                "attributes": {
                  "destination": "moon.jpg",
                  "description": "moon"
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 26
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 37
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 27
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 30
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 31
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 31
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 32
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 27
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 30
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 27
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 30
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 33
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 37
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 33
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 37
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-531",
    "markdown": "[foo [bar](/uri)][ref]\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 22,
          "offset": 22
        },
        "children": [
          {
            "text": "[foo ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 16,
              "offset": 16
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "/uri"
              },
              {
                "start": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "end": {
                  "line": 0,
                  "column": 16,
                  "offset": 16
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          },
          {
            "text": "]",
            "start": {
              "line": 0,
              "column": 16,
              "offset": 16
            },
            "end": {
              "line": 0,
              "column": 17,
              "offset": 17
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 17,
              "offset": 17
            },
            "end": {
              "line": 0,
              "column": 22,
              "offset": 22
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 17,
                  "offset": 17
                },
                "end": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "end": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 0,
                  "column": 18,
                  "offset": 18
                },
                "end": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 24
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 35
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 25
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 28
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 29
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 29
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 30
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 28
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 25
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 28
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 31
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 35
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 31
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 35
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-532",
    "markdown": "[foo *bar [baz][ref]*][ref]\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 27,
          "offset": 27
        },
        "children": [
          {
            "text": "[foo ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "emphasis",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 21,
              "offset": 21
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "*"
              },
              {
                "start": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "end": {
                  "line": 0,
                  "column": 21,
                  "offset": 21
                },
                "text": "*"
              }
            ],
            "children": [
              {
                "text": "bar ",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                }
              },
              {
                "type": "link",
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 20,
                  "offset": 20
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 10,
                      "offset": 10
                    },
                    "end": {
                      "line": 0,
                      "column": 11,
                      "offset": 11
                    },
                    "text": "["
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 14,
                      "offset": 14
                    },
                    "end": {
                      "line": 0,
                      "column": 15,
                      "offset": 15
                    },
                    "text": "]"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 15,
                      "offset": 15
                    },
                    "end": {
                      "line": 0,
                      "column": 16,
                      "offset": 16
                    },
                    "text": "["
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 16,
                      "offset": 16
                    },
                    "end": {
                      "line": 0,
                      "column": 19,
                      "offset": 19
                    },
                    "text": "ref"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 19,
                      "offset": 19
                    },
                    "end": {
                      "line": 0,
                      "column": 20,
                      "offset": 20
                    },
                    "text": "]"
                  }
                ],
                "children": [
                  {
                    "text": "baz",
                    "start": {
                      "line": 0,
                      "column": 11,
                      "offset": 11
                    },
                    "end": {
                      "line": 0,
                      "column": 14,
                      "offset": 14
                    }
                  }
                ],
                "attributes": {
                  "destination": "/uri"
                }
              }
            ]
          },
          {
            "text": "]",
            "start": {
              "line": 0,
              "column": 21,
              "offset": 21
            },
            "end": {
              "line": 0,
              "column": 22,
              "offset": 22
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 22,
              "offset": 22
            },
            "end": {
              "line": 0,
              "column": 27,
              "offset": 27
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 22,
                  "offset": 22
                },
                "end": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 26,
                  "offset": 26
                },
                "end": {
                  "line": 0,
                  "column": 27,
                  "offset": 27
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 0,
                  "column": 23,
                  "offset": 23
                },
                "end": {
                  "line": 0,
                  "column": 26,
                  "offset": 26
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 29
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 40
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 29
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 30
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 33
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 34
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 34
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 35
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 30
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 33
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 30
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 33
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 36
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 40
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 36
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 40
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-533",
    "markdown": "*[foo*][ref]\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 12,
          "offset": 12
        },
        "children": [
          {
            "text": "*",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "ref"
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              },
              {
                "text": "*",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 14
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 25
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 20
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 18
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 18
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 25
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 21
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 25
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-534",
    "markdown": "[foo *bar][ref]*\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 16,
          "offset": 16
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "ref"
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              },
              {
                "text": "*",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              },
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          },
          {
            "text": "*",
            "start": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "end": {
              "line": 0,
              "column": 16,
              "offset": 16
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 18
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 29
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 19
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 22
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 23
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 23
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 24
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 22
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 19
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 22
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 29
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 25
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 29
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-535",
    "markdown": "[foo <bar attr=\"][ref]\">\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 24,
          "offset": 24
        },
        "children": [
          {
            "text": "[foo ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "rawHtml",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 24,
              "offset": 24
            },
            "children": [
              {
                "text": "<bar attr=\"][ref]\">",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 24,
                  "offset": 24
                }
              }
            ]
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 26
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 37
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 27
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 30
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 31
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 31
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 32
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 27
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 30
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 27
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 30
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 33
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 37
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 33
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 37
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-536",
    "markdown": "[foo`][ref]`\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 12,
          "offset": 12
        },
        "children": [
          {
            "text": "[foo",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 4,
              "offset": 4
            }
          },
          {
            "type": "codeSpan",
            "start": {
              "line": 0,
              "column": 4,
              "offset": 4
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "`"
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "`"
              }
            ],
            "children": [
              {
                "text": "][ref]",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                }
              }
            ]
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 14
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 25
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 20
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 18
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 18
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 25
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 21
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 25
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-537",
    "markdown": "[foo<http://example.com/?search=][ref]>\n\n[ref]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 39,
          "offset": 39
        },
        "children": [
          {
            "text": "[foo",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 4,
              "offset": 4
            }
          },
          {
            "type": "autolink",
            "start": {
              "line": 0,
              "column": 4,
              "offset": 4
            },
            "end": {
              "line": 0,
              "column": 39,
              "offset": 39
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "<"
              },
              {
                "start": {
                  "line": 0,
                  "column": 38,
                  "offset": 38
                },
                "end": {
                  "line": 0,
                  "column": 39,
                  "offset": 39
                },
                "text": ">"
              }
            ],
            "children": [
              {
                "text": "http://example.com/?search=][ref]",
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 38,
                  "offset": 38
                }
              }
            ],
            "attributes": {
              "destination": "http://example.com/?search=%5D%5Bref%5D",
              "text": "http://example.com/?search=][ref]"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 41
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 52
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 41
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 42
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 45
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 46
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 46
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 47
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 42
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 45
            },
            "children": [
              {
                "text": "ref",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 42
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 45
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 48
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 52
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 48
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 52
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-538",
    "markdown": "[foo][BaR]\n\n[bar]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 10,
          "offset": 10
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "text": "BaR"
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 12
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 31
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 12
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 13
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 17
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 18
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 25
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 30
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 31
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 16
            },
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 13
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 16
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 23
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 19
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 23
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 30
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 25
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 30
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-539",
    "markdown": "[ẞ]\n\n[SS]: /url\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 3,
          "offset": 3
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 3,
              "offset": 3
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 3,
                  "offset": 3
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "ẞ",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                }
              }
            ],
            "attributes": {
              "destination": "/url"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 5
        },
        "end": {
          "line": 2,
          "column": 10,
          "offset": 15
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 5
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 6
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 3,
              "offset": 8
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 9
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 9
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 10
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 6
            },
            "end": {
              "line": 2,
              "column": 3,
              "offset": 8
            },
            "children": [
              {
                "text": "SS",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 6
                },
                "end": {
                  "line": 2,
                  "column": 3,
                  "offset": 8
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 6,
              "offset": 11
            },
            "end": {
              "line": 2,
              "column": 10,
              "offset": 15
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 6,
                  "offset": 11
                },
                "end": {
                  "line": 2,
                  "column": 10,
                  "offset": 15
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-540",
    "markdown": "[Foo\n  bar]: /url\n\n[Baz][Foo bar]\n",
    "expected": [
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 1,
          "column": 12,
          "offset": 17
        },
        "markers": [
          {
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "text": "["
          },
          {
            "start": {
              "line": 1,
              "column": 5,
              "offset": 10
            },
            "end": {
              "line": 1,
              "column": 6,
              "offset": 11
            },
            "text": "]"
          },
          {
            "start": {
              "line": 1,
              "column": 6,
              "offset": 11
            },
            "end": {
              "line": 1,
              "column": 7,
              "offset": 12
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 1,
              "column": 5,
              "offset": 10
            },
            "children": [
              {
                "text": "Foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              },
              {
                "text": "\n",
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 1,
                  "column": 0,
                  "offset": 5
                }
              },
              {
                "text": "  bar",
                "start": {
                  "line": 1,
                  "column": 0,
                  "offset": 5
                },
                "end": {
                  "line": 1,
                  "column": 5,
                  "offset": 10
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 1,
              "column": 8,
              "offset": 13
            },
            "end": {
              "line": 1,
              "column": 12,
              "offset": 17
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 1,
                  "column": 8,
                  "offset": 13
                },
                "end": {
                  "line": 1,
                  "column": 12,
                  "offset": 17
                }
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 3,
          "column": 0,
          "offset": 19
        },
        "end": {
          "line": 3,
          "column": 14,
          "offset": 33
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 3,
              "column": 0,
              "offset": 19
            },
            "end": {
              "line": 3,
              "column": 14,
              "offset": 33
            },
            "markers": [
              {
                "start": {
                  "line": 3,
                  "column": 0,
                  "offset": 19
                },
                "end": {
                  "line": 3,
                  "column": 1,
                  "offset": 20
                },
                "text": "["
              },
              {
                "start": {
                  "line": 3,
                  "column": 4,
                  "offset": 23
                },
                "end": {
                  "line": 3,
                  "column": 5,
                  "offset": 24
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 3,
                  "column": 5,
                  "offset": 24
                },
                "end": {
                  "line": 3,
                  "column": 6,
                  "offset": 25
                },
                "text": "["
              },
              {
                "start": {
                  "line": 3,
                  "column": 6,
                  "offset": 25
                },
                "end": {
                  "line": 3,
                  "column": 13,
                  "offset": 32
                },
                "text": "Foo bar"
              },
              {
                "start": {
                  "line": 3,
                  "column": 13,
                  "offset": 32
                },
                "end": {
                  "line": 3,
                  "column": 14,
                  "offset": 33
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "Baz",
                "start": {
                  "line": 3,
                  "column": 1,
                  "offset": 20
                },
                "end": {
                  "line": 3,
                  "column": 4,
                  "offset": 23
                }
              }
            ],
            "attributes": {
              "destination": "/url"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-541",
    "markdown": "[foo] [bar]\n\n[bar]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 11,
          "offset": 11
        },
        "children": [
          {
            "text": "[foo] ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 6,
              "offset": 6
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "end": {
              "line": 0,
              "column": 11,
              "offset": 11
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 13
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 32
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 14
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 18
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 19
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 26
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 31
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 32
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 17
            },
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 14
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 17
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 24
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 24
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 31
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 26
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 31
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-542",
    "markdown": "[foo]\n[bar]\n\n[bar]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 1,
          "column": 5,
          "offset": 11
        },
        "children": [
          {
            "text": "[foo]\n",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 1,
              "column": 0,
              "offset": 6
            }
          },
          {
            "type": "link",
            "start": {
              "line": 1,
              "column": 0,
              "offset": 6
            },
            "end": {
              "line": 1,
              "column": 5,
              "offset": 11
            },
            "markers": [
              {
                "start": {
                  "line": 1,
                  "column": 0,
                  "offset": 6
                },
                "end": {
                  "line": 1,
                  "column": 1,
                  "offset": 7
                },
                "text": "["
              },
              {
                "start": {
                  "line": 1,
                  "column": 4,
                  "offset": 10
                },
                "end": {
                  "line": 1,
                  "column": 5,
                  "offset": 11
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 1,
                  "column": 1,
                  "offset": 7
                },
                "end": {
                  "line": 1,
                  "column": 4,
                  "offset": 10
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 3,
          "column": 0,
          "offset": 13
        },
        "end": {
          "line": 3,
          "column": 19,
          "offset": 32
        },
        "markers": [
          {
            "start": {
              "line": 3,
              "column": 0,
              "offset": 13
            },
            "end": {
              "line": 3,
              "column": 1,
              "offset": 14
            },
            "text": "["
          },
          {
            "start": {
              "line": 3,
              "column": 4,
              "offset": 17
            },
            "end": {
              "line": 3,
              "column": 5,
              "offset": 18
            },
            "text": "]"
          },
          {
            "start": {
              "line": 3,
              "column": 5,
              "offset": 18
            },
            "end": {
              "line": 3,
              "column": 6,
              "offset": 19
            },
            "text": ":"
          },
          {
            "start": {
              "line": 3,
              "column": 12,
              "offset": 25
            },
            "end": {
              "line": 3,
              "column": 13,
              "offset": 26
            },
            "text": "\""
          },
          {
            "start": {
              "line": 3,
              "column": 18,
              "offset": 31
            },
            "end": {
              "line": 3,
              "column": 19,
              "offset": 32
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 3,
              "column": 1,
              "offset": 14
            },
            "end": {
              "line": 3,
              "column": 4,
              "offset": 17
            },
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 3,
                  "column": 1,
                  "offset": 14
                },
                "end": {
                  "line": 3,
                  "column": 4,
                  "offset": 17
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 3,
              "column": 7,
              "offset": 20
            },
            "end": {
              "line": 3,
              "column": 11,
              "offset": 24
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 3,
                  "column": 7,
                  "offset": 20
                },
                "end": {
                  "line": 3,
                  "column": 11,
                  "offset": 24
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 3,
              "column": 13,
              "offset": 26
            },
            "end": {
              "line": 3,
              "column": 18,
              "offset": 31
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 3,
                  "column": 13,
                  "offset": 26
                },
                "end": {
                  "line": 3,
                  "column": 18,
                  "offset": 31
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-543",
    "markdown": "[foo]: /url1\n\n[foo]: /url2\n\n[bar][foo]\n",
    "expected": [
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 12,
          "offset": 12
        },
        "markers": [
          {
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "text": "["
          },
          {
            "start": {
              "line": 0,
              "column": 4,
              "offset": 4
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "text": "]"
          },
          {
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 0,
              "column": 4,
              "offset": 4
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "children": [
              {
                "text": "/url1",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                }
              }
            ]
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 14
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 26
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 20
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 18
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 18
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 26
            },
            "children": [
              {
                "text": "/url2",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 21
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 26
                }
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 4,
          "column": 0,
          "offset": 28
        },
        "end": {
          "line": 4,
          "column": 10,
          "offset": 38
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 4,
              "column": 0,
              "offset": 28
            },
            "end": {
              "line": 4,
              "column": 10,
              "offset": 38
            },
            "markers": [
              {
                "start": {
                  "line": 4,
                  "column": 0,
                  "offset": 28
                },
                "end": {
                  "line": 4,
                  "column": 1,
                  "offset": 29
                },
                "text": "["
              },
              {
                "start": {
                  "line": 4,
                  "column": 4,
                  "offset": 32
                },
                "end": {
                  "line": 4,
                  "column": 5,
                  "offset": 33
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 4,
                  "column": 5,
                  "offset": 33
                },
                "end": {
                  "line": 4,
                  "column": 6,
                  "offset": 34
                },
                "text": "["
              },
              {
                "start": {
                  "line": 4,
                  "column": 6,
                  "offset": 34
                },
                "end": {
                  "line": 4,
                  "column": 9,
                  "offset": 37
                },
                "text": "foo"
              },
              {
                "start": {
                  "line": 4,
                  "column": 9,
                  "offset": 37
                },
                "end": {
                  "line": 4,
                  "column": 10,
                  "offset": 38
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 4,
                  "column": 1,
                  "offset": 29
                },
                "end": {
                  "line": 4,
                  "column": 4,
                  "offset": 32
                }
              }
            ],
            "attributes": {
              "destination": "/url1"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-544",
    "markdown": "[bar][foo\\!]\n\n[foo!]: /url\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 12,
          "offset": 12
        },
        "markers": [
          {
            "start": {
              "line": 0,
              "column": 9,
              "offset": 9
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "text": "\\"
          }
        ],
        "children": [
          {
            "text": "[bar][foo",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 9,
              "offset": 9
            }
          },
          {
            "text": "!",
            "start": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "end": {
              "line": 0,
              "column": 11,
              "offset": 11
            }
          },
          {
            "text": "]",
            "start": {
              "line": 0,
              "column": 11,
              "offset": 11
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 14
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 26
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 20
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 6,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 7,
              "offset": 21
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 19
            },
            "children": [
              {
                "text": "foo!",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 5,
                  "offset": 19
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 8,
              "offset": 22
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 26
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 8,
                  "offset": 22
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 26
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-545",
    "markdown": "[foo][ref[]\n\n[ref[]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 11,
          "offset": 11
        },
        "children": [
          {
            "text": "[foo][ref[]",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 11,
              "offset": 11
            }
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 13
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 25
        },
        "children": [
          {
            "text": "[ref[]: /uri",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 25
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-546",
    "markdown": "[foo][ref[bar]]\n\n[ref[bar]]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "text": "[foo][ref[bar]]",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            }
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 17
        },
        "end": {
          "line": 2,
          "column": 16,
          "offset": 33
        },
        "children": [
          {
            "text": "[ref[bar]]: /uri",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 16,
              "offset": 33
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-547",
    "markdown": "[[[foo]]]\n\n[[[foo]]]: /url\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 9,
          "offset": 9
        },
        "children": [
          {
            "text": "[[[foo]]]",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 9,
              "offset": 9
            }
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 11
        },
        "end": {
          "line": 2,
          "column": 15,
          "offset": 26
        },
        "children": [
          {
            "text": "[[[foo]]]: /url",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 11
            },
            "end": {
              "line": 2,
              "column": 15,
              "offset": 26
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-548",
    "markdown": "[foo][ref\\[]\n\n[ref\\[]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 12,
          "offset": 12
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "ref\\["
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 14
        },
        "end": {
          "line": 2,
          "column": 13,
          "offset": 27
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 6,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 7,
              "offset": 21
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 7,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 8,
              "offset": 22
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 20
            },
            "children": [
              {
                "text": "ref\\[",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 6,
                  "offset": 20
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 9,
              "offset": 23
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 27
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 2,
                  "column": 9,
                  "offset": 23
                },
                "end": {
                  "line": 2,
                  "column": 13,
                  "offset": 27
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-549",
    "markdown": "[bar\\\\]: /uri\n\n[bar\\\\]\n",
    "expected": [
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 13,
          "offset": 13
        },
        "markers": [
          {
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "text": "["
          },
          {
            "start": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "end": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "text": "]"
          },
          {
            "start": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "end": {
              "line": 0,
              "column": 8,
              "offset": 8
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "children": [
              {
                "text": "bar\\\\",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 0,
              "column": 9,
              "offset": 9
            },
            "end": {
              "line": 0,
              "column": 13,
              "offset": 13
            },
            "children": [
              {
                "text": "/uri",
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                }
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 15
        },
        "end": {
          "line": 2,
          "column": 7,
          "offset": 22
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 7,
              "offset": 22
            },
            "markers": [
              {
                "start": {
                  "line": 2,
                  "column": 0,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 1,
                  "offset": 16
                },
                "text": "["
              },
              {
                "start": {
                  "line": 2,
                  "column": 4,
                  "offset": 19
                },
                "end": {
                  "line": 2,
                  "column": 5,
                  "offset": 20
                },
                "text": "\\"
              },
              {
                "start": {
                  "line": 2,
                  "column": 6,
                  "offset": 21
                },
                "end": {
                  "line": 2,
                  "column": 7,
                  "offset": 22
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 19
                }
              },
              {
                "text": "\\",
                "start": {
                  "line": 2,
                  "column": 5,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 6,
                  "offset": 21
                }
              }
            ],
            "attributes": {
              "destination": "/uri"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-550",
    "markdown": "[]\n\n[]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 2,
          "offset": 2
        },
        "children": [
          {
            "text": "[]",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 2,
              "offset": 2
            }
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 4
        },
        "end": {
          "line": 2,
          "column": 8,
          "offset": 12
        },
        "children": [
          {
            "text": "[]: /uri",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 4
            },
            "end": {
              "line": 2,
              "column": 8,
              "offset": 12
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-551",
    "markdown": "[\n ]\n\n[\n ]: /uri\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 1,
          "column": 2,
          "offset": 4
        },
        "children": [
          {
            "text": "[\n",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 1,
              "column": 0,
              "offset": 2
            }
          },
          {
            "text": "]",
            "start": {
              "line": 1,
              "column": 1,
              "offset": 3
            },
            "end": {
              "line": 1,
              "column": 2,
              "offset": 4
            }
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 3,
          "column": 0,
          "offset": 6
        },
        "end": {
          "line": 4,
          "column": 8,
          "offset": 16
        },
        "children": [
          {
            "text": "[\n",
            "start": {
              "line": 3,
              "column": 0,
              "offset": 6
            },
            "end": {
              "line": 4,
              "column": 0,
              "offset": 8
            }
          },
          {
            "text": "]: /uri",
            "start": {
              "line": 4,
              "column": 1,
              "offset": 9
            },
            "end": {
              "line": 4,
              "column": 8,
              "offset": 16
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-552",
    "markdown": "[foo][]\n\n[foo]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 7,
          "offset": 7
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 9
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 28
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 9
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 15
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 22
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 27
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 28
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 10
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 13
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 20
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 20
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 22
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 27
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 22
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 27
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-553",
    "markdown": "[*foo* bar][]\n\n[*foo* bar]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 13,
          "offset": 13
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 13,
              "offset": 13
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "end": {
                  "line": 0,
                  "column": 13,
                  "offset": 13
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "type": "emphasis",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 1,
                      "offset": 1
                    },
                    "end": {
                      "line": 0,
                      "column": 2,
                      "offset": 2
                    },
                    "text": "*"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 5,
                      "offset": 5
                    },
                    "end": {
                      "line": 0,
                      "column": 6,
                      "offset": 6
                    },
                    "text": "*"
                  }
                ],
                "children": [
                  {
                    "text": "foo",
                    "start": {
                      "line": 0,
                      "column": 2,
                      "offset": 2
                    },
                    "end": {
                      "line": 0,
                      "column": 5,
                      "offset": 5
                    }
                  }
                ]
              },
              {
                "text": " bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 15
        },
        "end": {
          "line": 2,
          "column": 25,
          "offset": 40
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 16
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 10,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 26
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 11,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 27
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 33
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 34
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 24,
              "offset": 39
            },
            "end": {
              "line": 2,
              "column": 25,
              "offset": 40
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 10,
              "offset": 25
            },
            "children": [
              {
                "text": "*foo* bar",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 10,
                  "offset": 25
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 28
            },
            "end": {
              "line": 2,
              "column": 17,
              "offset": 32
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 28
                },
                "end": {
                  "line": 2,
                  "column": 17,
                  "offset": 32
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 19,
              "offset": 34
            },
            "end": {
              "line": 2,
              "column": 24,
              "offset": 39
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 19,
                  "offset": 34
                },
                "end": {
                  "line": 2,
                  "column": 24,
                  "offset": 39
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-554",
    "markdown": "[Foo][]\n\n[foo]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 7,
          "offset": 7
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "Foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 9
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 28
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 9
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 15
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 22
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 27
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 28
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 10
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 13
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 20
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 20
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 22
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 27
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 22
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 27
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-555",
    "markdown": "[foo] \n[]\n\n[foo]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 1,
          "column": 2,
          "offset": 9
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          },
          {
            "text": "\n[]",
            "start": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "end": {
              "line": 1,
              "column": 2,
              "offset": 9
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 3,
          "column": 0,
          "offset": 11
        },
        "end": {
          "line": 3,
          "column": 19,
          "offset": 30
        },
        "markers": [
          {
            "start": {
              "line": 3,
              "column": 0,
              "offset": 11
            },
            "end": {
              "line": 3,
              "column": 1,
              "offset": 12
            },
            "text": "["
          },
          {
            "start": {
              "line": 3,
              "column": 4,
              "offset": 15
            },
            "end": {
              "line": 3,
              "column": 5,
              "offset": 16
            },
            "text": "]"
          },
          {
            "start": {
              "line": 3,
              "column": 5,
              "offset": 16
            },
            "end": {
              "line": 3,
              "column": 6,
              "offset": 17
            },
            "text": ":"
          },
          {
            "start": {
              "line": 3,
              "column": 12,
              "offset": 23
            },
            "end": {
              "line": 3,
              "column": 13,
              "offset": 24
            },
            "text": "\""
          },
          {
            "start": {
              "line": 3,
              "column": 18,
              "offset": 29
            },
            "end": {
              "line": 3,
              "column": 19,
              "offset": 30
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 3,
              "column": 1,
              "offset": 12
            },
            "end": {
              "line": 3,
              "column": 4,
              "offset": 15
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 3,
                  "column": 1,
                  "offset": 12
                },
                "end": {
                  "line": 3,
                  "column": 4,
                  "offset": 15
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 3,
              "column": 7,
              "offset": 18
            },
            "end": {
              "line": 3,
              "column": 11,
              "offset": 22
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 3,
                  "column": 7,
                  "offset": 18
                },
                "end": {
                  "line": 3,
                  "column": 11,
                  "offset": 22
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 3,
              "column": 13,
              "offset": 24
            },
            "end": {
              "line": 3,
              "column": 18,
              "offset": 29
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 3,
                  "column": 13,
                  "offset": 24
                },
                "end": {
                  "line": 3,
                  "column": 18,
                  "offset": 29
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-556",
    "markdown": "[foo]\n\n[foo]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 5,
          "offset": 5
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 7
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 26
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 7
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 8
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 11
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 12
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 12
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 13
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 20
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 26
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 8
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 11
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 8
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 11
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 18
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 14
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 18
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 25
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 25
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-557",
    "markdown": "[*foo* bar]\n\n[*foo* bar]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 11,
          "offset": 11
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 11,
              "offset": 11
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "type": "emphasis",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 1,
                      "offset": 1
                    },
                    "end": {
                      "line": 0,
                      "column": 2,
                      "offset": 2
                    },
                    "text": "*"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 5,
                      "offset": 5
                    },
                    "end": {
                      "line": 0,
                      "column": 6,
                      "offset": 6
                    },
                    "text": "*"
                  }
                ],
                "children": [
                  {
                    "text": "foo",
                    "start": {
                      "line": 0,
                      "column": 2,
                      "offset": 2
                    },
                    "end": {
                      "line": 0,
                      "column": 5,
                      "offset": 5
                    }
                  }
                ]
              },
              {
                "text": " bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 13
        },
        "end": {
          "line": 2,
          "column": 25,
          "offset": 38
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 14
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 10,
              "offset": 23
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 24
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 11,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 25
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 31
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 32
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 24,
              "offset": 37
            },
            "end": {
              "line": 2,
              "column": 25,
              "offset": 38
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 10,
              "offset": 23
            },
            "children": [
              {
                "text": "*foo* bar",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 14
                },
                "end": {
                  "line": 2,
                  "column": 10,
                  "offset": 23
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 17,
              "offset": 30
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 26
                },
                "end": {
                  "line": 2,
                  "column": 17,
                  "offset": 30
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 19,
              "offset": 32
            },
            "end": {
              "line": 2,
              "column": 24,
              "offset": 37
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 19,
                  "offset": 32
                },
                "end": {
                  "line": 2,
                  "column": 24,
                  "offset": 37
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-558",
    "markdown": "[[*foo* bar]]\n\n[*foo* bar]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 13,
          "offset": 13
        },
        "children": [
          {
            "text": "[",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "type": "emphasis",
                "start": {
                  "line": 0,
                  "column": 2,
                  "offset": 2
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "markers": [
                  {
                    "start": {
                      "line": 0,
                      "column": 2,
                      "offset": 2
                    },
                    "end": {
                      "line": 0,
                      "column": 3,
                      "offset": 3
                    },
                    "text": "*"
                  },
                  {
                    "start": {
                      "line": 0,
                      "column": 6,
                      "offset": 6
                    },
                    "end": {
                      "line": 0,
                      "column": 7,
                      "offset": 7
                    },
                    "text": "*"
                  }
                ],
                "children": [
                  {
                    "text": "foo",
                    "start": {
                      "line": 0,
                      "column": 3,
                      "offset": 3
                    },
                    "end": {
                      "line": 0,
                      "column": 6,
                      "offset": 6
                    }
                  }
                ]
              },
              {
                "text": " bar",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          },
          {
            "text": "]",
            "start": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "end": {
              "line": 0,
              "column": 13,
              "offset": 13
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 15
        },
        "end": {
          "line": 2,
          "column": 25,
          "offset": 40
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 16
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 10,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 26
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 11,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 27
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 33
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 34
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 24,
              "offset": 39
            },
            "end": {
              "line": 2,
              "column": 25,
              "offset": 40
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 10,
              "offset": 25
            },
            "children": [
              {
                "text": "*foo* bar",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 10,
                  "offset": 25
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 28
            },
            "end": {
              "line": 2,
              "column": 17,
              "offset": 32
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 28
                },
                "end": {
                  "line": 2,
                  "column": 17,
                  "offset": 32
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 19,
              "offset": 34
            },
            "end": {
              "line": 2,
              "column": 24,
              "offset": 39
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 19,
                  "offset": 34
                },
                "end": {
                  "line": 2,
                  "column": 24,
                  "offset": 39
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-559",
    "markdown": "[[bar [foo]\n\n[foo]: /url\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 11,
          "offset": 11
        },
        "children": [
          {
            "text": "[[bar ",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 6,
              "offset": 6
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "end": {
              "line": 0,
              "column": 11,
              "offset": 11
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                }
              }
            ],
            "attributes": {
              "destination": "/url"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 13
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 24
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 14
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 18
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 19
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 17
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 14
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 17
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 24
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 24
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-560",
    "markdown": "[Foo]\n\n[foo]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 5,
          "offset": 5
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "Foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url",
              "title": "title"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 7
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 26
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 7
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 8
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 11
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 12
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 12
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 13
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 20
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 25
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 26
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 8
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 11
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 8
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 11
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 18
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 14
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 18
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 25
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 25
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-561",
    "markdown": "[foo] bar\n\n[foo]: /url\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 9,
          "offset": 9
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url"
            }
          },
          {
            "text": " bar",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 9,
              "offset": 9
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 11
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 22
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 11
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 12
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 16
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 17
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 12
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 15
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 12
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 15
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 22
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 18
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 22
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-562",
    "markdown": "\\[foo]\n\n[foo]: /url \"title\"\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 6,
          "offset": 6
        },
        "markers": [
          {
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "text": "\\"
          }
        ],
        "children": [
          {
            "text": "[",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 0,
              "column": 2,
              "offset": 2
            }
          },
          {
            "text": "foo]",
            "start": {
              "line": 0,
              "column": 2,
              "offset": 2
            },
            "end": {
              "line": 0,
              "column": 6,
              "offset": 6
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 8
        },
        "end": {
          "line": 2,
          "column": 19,
          "offset": 27
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 8
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 9
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 12
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 13
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 14
            },
            "text": ":"
          },
          {
            "start": {
              "line": 2,
              "column": 12,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 13,
              "offset": 21
            },
            "text": "\""
          },
          {
            "start": {
              "line": 2,
              "column": 18,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 19,
              "offset": 27
            },
            "text": "\""
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 9
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 12
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 9
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 12
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 19
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 19
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionTitle",
            "start": {
              "line": 2,
              "column": 13,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 18,
              "offset": 26
            },
            "children": [
              {
                "text": "title",
                "start": {
                  "line": 2,
                  "column": 13,
                  "offset": 21
                },
                "end": {
                  "line": 2,
                  "column": 18,
                  "offset": 26
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-563",
    "markdown": "[foo*]: /url\n\n*[foo*]\n",
    "expected": [
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 12,
          "offset": 12
        },
        "markers": [
          {
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "text": "["
          },
          {
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "text": "]"
          },
          {
            "start": {
              "line": 0,
              "column": 6,
              "offset": 6
            },
            "end": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 0,
              "column": 1,
              "offset": 1
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "children": [
              {
                "text": "foo*",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 0,
              "column": 8,
              "offset": 8
            },
            "end": {
              "line": 0,
              "column": 12,
              "offset": 12
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 0,
                  "column": 8,
                  "offset": 8
                },
                "end": {
                  "line": 0,
                  "column": 12,
                  "offset": 12
                }
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 14
        },
        "end": {
          "line": 2,
          "column": 7,
          "offset": 21
        },
        "children": [
          {
            "text": "*",
            "start": {
              "line": 2,
              "column": 0,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 15
            }
          },
          {
            "type": "link",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 15
            },
            "end": {
              "line": 2,
              "column": 7,
              "offset": 21
            },
            "markers": [
              {
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 15
                },
                "end": {
                  "line": 2,
                  "column": 2,
                  "offset": 16
                },
                "text": "["
              },
              {
                "start": {
                  "line": 2,
                  "column": 6,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 7,
                  "offset": 21
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 2,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 5,
                  "offset": 19
                }
              },
              {
                "text": "*",
                "start": {
                  "line": 2,
                  "column": 5,
                  "offset": 19
                },
                "end": {
                  "line": 2,
                  "column": 6,
                  "offset": 20
                }
              }
            ],
            "attributes": {
              "destination": "/url"
            }
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-564",
    "markdown": "[foo][bar]\n\n[foo]: /url1\n[bar]: /url2\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 10,
          "offset": 10
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "text": "bar"
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url2"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 12
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 24
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 12
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 13
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 17
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 18
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 16
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 13
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 16
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 24
            },
            "children": [
              {
                "text": "/url1",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 19
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 24
                }
              }
            ]
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 3,
          "column": 0,
          "offset": 25
        },
        "end": {
          "line": 3,
          "column": 12,
          "offset": 37
        },
        "markers": [
          {
            "start": {
              "line": 3,
              "column": 0,
              "offset": 25
            },
            "end": {
              "line": 3,
              "column": 1,
              "offset": 26
            },
            "text": "["
          },
          {
            "start": {
              "line": 3,
              "column": 4,
              "offset": 29
            },
            "end": {
              "line": 3,
              "column": 5,
              "offset": 30
            },
            "text": "]"
          },
          {
            "start": {
              "line": 3,
              "column": 5,
              "offset": 30
            },
            "end": {
              "line": 3,
              "column": 6,
              "offset": 31
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 3,
              "column": 1,
              "offset": 26
            },
            "end": {
              "line": 3,
              "column": 4,
              "offset": 29
            },
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 3,
                  "column": 1,
                  "offset": 26
                },
                "end": {
                  "line": 3,
                  "column": 4,
                  "offset": 29
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 3,
              "column": 7,
              "offset": 32
            },
            "end": {
              "line": 3,
              "column": 12,
              "offset": 37
            },
            "children": [
              {
                "text": "/url2",
                "start": {
                  "line": 3,
                  "column": 7,
                  "offset": 32
                },
                "end": {
                  "line": 3,
                  "column": 12,
                  "offset": 37
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-565",
    "markdown": "[foo][]\n\n[foo]: /url1\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 7,
          "offset": 7
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url1"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 9
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 21
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 9
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 15
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 10
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 13
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 21
            },
            "children": [
              {
                "text": "/url1",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 21
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-566",
    "markdown": "[foo]()\n\n[foo]: /url1\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 7,
          "offset": 7
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 7,
              "offset": 7
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "("
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 7,
                  "offset": 7
                },
                "text": ")"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": ""
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 9
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 21
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 9
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 14
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 15
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 10
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 13
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 10
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 13
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 16
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 21
            },
            "children": [
              {
                "text": "/url1",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 16
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 21
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-567",
    "markdown": "[foo](not a link)\n\n[foo]: /url1\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 17,
          "offset": 17
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url1"
            }
          },
          {
            "text": "(not a link)",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 17,
              "offset": 17
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 19
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 31
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 19
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 20
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 23
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 24
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 25
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 20
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 23
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 20
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 23
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 26
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 31
            },
            "children": [
              {
                "text": "/url1",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 26
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 31
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-568",
    "markdown": "[foo][bar][baz]\n\n[baz]: /url\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "text": "[foo]",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "baz"
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                }
              }
            ],
            "attributes": {
              "destination": "/url"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 17
        },
        "end": {
          "line": 2,
          "column": 11,
          "offset": 28
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 18
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 22
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 22
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 23
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 21
            },
            "children": [
              {
                "text": "baz",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 18
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 21
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 11,
              "offset": 28
            },
            "children": [
              {
                "text": "/url",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 24
                },
                "end": {
                  "line": 2,
                  "column": 11,
                  "offset": 28
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-569",
    "markdown": "[foo][bar][baz]\n\n[baz]: /url1\n[bar]: /url2\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 0,
                  "offset": 0
                },
                "end": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                },
                "end": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "text": "bar"
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 0,
                  "column": 1,
                  "offset": 1
                },
                "end": {
                  "line": 0,
                  "column": 4,
                  "offset": 4
                }
              }
            ],
            "attributes": {
              "destination": "/url2"
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 10,
              "offset": 10
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "baz",
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                }
              }
            ],
            "attributes": {
              "destination": "/url1"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 17
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 29
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 18
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 22
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 22
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 23
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 21
            },
            "children": [
              {
                "text": "baz",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 18
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 21
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 29
            },
            "children": [
              {
                "text": "/url1",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 24
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 29
                }
              }
            ]
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 3,
          "column": 0,
          "offset": 30
        },
        "end": {
          "line": 3,
          "column": 12,
          "offset": 42
        },
        "markers": [
          {
            "start": {
              "line": 3,
              "column": 0,
              "offset": 30
            },
            "end": {
              "line": 3,
              "column": 1,
              "offset": 31
            },
            "text": "["
          },
          {
            "start": {
              "line": 3,
              "column": 4,
              "offset": 34
            },
            "end": {
              "line": 3,
              "column": 5,
              "offset": 35
            },
            "text": "]"
          },
          {
            "start": {
              "line": 3,
              "column": 5,
              "offset": 35
            },
            "end": {
              "line": 3,
              "column": 6,
              "offset": 36
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 3,
              "column": 1,
              "offset": 31
            },
            "end": {
              "line": 3,
              "column": 4,
              "offset": 34
            },
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 3,
                  "column": 1,
                  "offset": 31
                },
                "end": {
                  "line": 3,
                  "column": 4,
                  "offset": 34
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 3,
              "column": 7,
              "offset": 37
            },
            "end": {
              "line": 3,
              "column": 12,
              "offset": 42
            },
            "children": [
              {
                "text": "/url2",
                "start": {
                  "line": 3,
                  "column": 7,
                  "offset": 37
                },
                "end": {
                  "line": 3,
                  "column": 12,
                  "offset": 42
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "description": "Links, https://spec.commonmark.org/0.30/#example-570",
    "markdown": "[foo][bar][baz]\n\n[baz]: /url1\n[foo]: /url2\n",
    "expected": [
      {
        "type": "paragraph",
        "start": {
          "line": 0,
          "column": 0,
          "offset": 0
        },
        "end": {
          "line": 0,
          "column": 15,
          "offset": 15
        },
        "children": [
          {
            "text": "[foo]",
            "start": {
              "line": 0,
              "column": 0,
              "offset": 0
            },
            "end": {
              "line": 0,
              "column": 5,
              "offset": 5
            }
          },
          {
            "type": "link",
            "start": {
              "line": 0,
              "column": 5,
              "offset": 5
            },
            "end": {
              "line": 0,
              "column": 15,
              "offset": 15
            },
            "markers": [
              {
                "start": {
                  "line": 0,
                  "column": 5,
                  "offset": 5
                },
                "end": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                },
                "end": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "text": "]"
              },
              {
                "start": {
                  "line": 0,
                  "column": 10,
                  "offset": 10
                },
                "end": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "text": "["
              },
              {
                "start": {
                  "line": 0,
                  "column": 11,
                  "offset": 11
                },
                "end": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "text": "baz"
              },
              {
                "start": {
                  "line": 0,
                  "column": 14,
                  "offset": 14
                },
                "end": {
                  "line": 0,
                  "column": 15,
                  "offset": 15
                },
                "text": "]"
              }
            ],
            "children": [
              {
                "text": "bar",
                "start": {
                  "line": 0,
                  "column": 6,
                  "offset": 6
                },
                "end": {
                  "line": 0,
                  "column": 9,
                  "offset": 9
                }
              }
            ],
            "attributes": {
              "destination": "/url1"
            }
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 2,
          "column": 0,
          "offset": 17
        },
        "end": {
          "line": 2,
          "column": 12,
          "offset": 29
        },
        "markers": [
          {
            "start": {
              "line": 2,
              "column": 0,
              "offset": 17
            },
            "end": {
              "line": 2,
              "column": 1,
              "offset": 18
            },
            "text": "["
          },
          {
            "start": {
              "line": 2,
              "column": 4,
              "offset": 21
            },
            "end": {
              "line": 2,
              "column": 5,
              "offset": 22
            },
            "text": "]"
          },
          {
            "start": {
              "line": 2,
              "column": 5,
              "offset": 22
            },
            "end": {
              "line": 2,
              "column": 6,
              "offset": 23
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 2,
              "column": 1,
              "offset": 18
            },
            "end": {
              "line": 2,
              "column": 4,
              "offset": 21
            },
            "children": [
              {
                "text": "baz",
                "start": {
                  "line": 2,
                  "column": 1,
                  "offset": 18
                },
                "end": {
                  "line": 2,
                  "column": 4,
                  "offset": 21
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 2,
              "column": 7,
              "offset": 24
            },
            "end": {
              "line": 2,
              "column": 12,
              "offset": 29
            },
            "children": [
              {
                "text": "/url1",
                "start": {
                  "line": 2,
                  "column": 7,
                  "offset": 24
                },
                "end": {
                  "line": 2,
                  "column": 12,
                  "offset": 29
                }
              }
            ]
          }
        ]
      },
      {
        "type": "linkReferenceDefinition",
        "start": {
          "line": 3,
          "column": 0,
          "offset": 30
        },
        "end": {
          "line": 3,
          "column": 12,
          "offset": 42
        },
        "markers": [
          {
            "start": {
              "line": 3,
              "column": 0,
              "offset": 30
            },
            "end": {
              "line": 3,
              "column": 1,
              "offset": 31
            },
            "text": "["
          },
          {
            "start": {
              "line": 3,
              "column": 4,
              "offset": 34
            },
            "end": {
              "line": 3,
              "column": 5,
              "offset": 35
            },
            "text": "]"
          },
          {
            "start": {
              "line": 3,
              "column": 5,
              "offset": 35
            },
            "end": {
              "line": 3,
              "column": 6,
              "offset": 36
            },
            "text": ":"
          }
        ],
        "children": [
          {
            "type": "linkReferenceDefinitionLabel",
            "start": {
              "line": 3,
              "column": 1,
              "offset": 31
            },
            "end": {
              "line": 3,
              "column": 4,
              "offset": 34
            },
            "children": [
              {
                "text": "foo",
                "start": {
                  "line": 3,
                  "column": 1,
                  "offset": 31
                },
                "end": {
                  "line": 3,
                  "column": 4,
                  "offset": 34
                }
              }
            ]
          },
          {
            "type": "linkReferenceDefinitionDestination",
            "start": {
              "line": 3,
              "column": 7,
              "offset": 37
            },
            "end": {
              "line": 3,
              "column": 12,
              "offset": 42
            },
            "children": [
              {
                "text": "/url2",
                "start": {
                  "line": 3,
                  "column": 7,
                  "offset": 37
                },
                "end": {
                  "line": 3,
                  "column": 12,
                  "offset": 42
                }
              }
            ]
          }
        ]
      }
    ]
  }
]
